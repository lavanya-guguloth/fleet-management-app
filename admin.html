<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Manager</title>
    <style>
        body {
            font-family: arial,sans-serif;
            background: #f4f4f4;
            margin: 0;
        }
        nav {
            background: #35424a;
            color: #ffffff;
            padding: 15px 0;
            text-align: center;
            display:flex;
            justify-content: space-between;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            position:sticky

            top : 0;
            z-index : 100;
        }
            nav select,nav button {
                padding: 7px;
                border: none;
                border-radius: 5px;
                margin-right: 10px;
                margin-left: 10px;
            }
            #add-form {
                background: #ffffff;
                padding: 20px;
                margin: 20px auto;
                box-shadow: 0 0 5px #ccc;
                display:flex;
                gap: 15px;
                flex-wrap:wrap;
            
            }
            #add-form input, #add-form select {
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 5px;
                flex: 1;
                width: 200px;
            }
            #main {
                margin :20px;
                display:grid;
                grid-template-columns: repeat(3,1fr);
                gap: 20px;
            }
            .card {
                background: #ffffff;
                padding: 15px;
                box-shadow: 0 0 5px #ccc;
                border-radius: 8px;
            }
            .card img {
                width: 100%;
                height: 150px;
                object-fit: cover;
                border-radius: 5px;
            }
            .card button {
                background: #35424a;
                color: #ffffff;
                border: none;
                padding: 10px;
                border-radius: 5px;
                cursor: pointer;
                margin-top: 10px;
            }


    </style>
</head>

<body>
    <nav>
        <div>
            <strong>Filters:</strong>
            <select id="catFilter">
                <option value="ALL">Category:All</option>
                <option value="Car">Car</option>
                <option value="Truck">Truck</option>
                <option value="Bike">Bike</option>
                <option value="auto">Auto</option>
            </select>
            <select id="availFilter">
                <option value="ALL">Status:All</option>
                <option value="Available">Available</option>
                <option value="unavailable">Unavailable</option>
                <option value="Out of Service">Out of Service</option>
            </select>
            <button id="clearFilters">Clear Filters</button>
        </div>
    </nav>
    <form id="add-form">
        <input id="regNo" type="text" placeholder="Registration No" required>
        <input id="category"type="text" placeholder="Category" required>
        <input id="driver"type="text" placeholder="Driver Name" required>
        <select id="availability" required>
            <option value="" disabled selected>Select Availability</option>
            <option value="Available">Available</option>
            <option value="Unavailable">Unavailable</option>
            <option value="Out of Service">Out of Service</option>
        </select>
        <input id="image"type="text" placeholder="Image URL" required>
        <button type="submit">Add Vehicle</button>

    </form>
    <div id="main"></div>
    <script>
        let data = [];

        document.getElementById('add-form').addEventListener('submit', function (e) {
            e.preventDefault();
            let regNo = document.getElementById('regNo').value.trim();
            let category = document.getElementById('category').value.trim();
            let driver = document.getElementById('driver').value.trim();
            let availability = document.getElementById('availability').value;
            let image = document.getElementById('image').value.trim();
            if (!regNo || !category || !driver || !availability || !image) {
                alert('Please fill all fields');
                return;
            }
            let vehicle = { regNo, category, driver, availability, image };
            data.push(vehicle);
            this.reset();
            render();
        });

        function render(filteredData = data) {
            let main = document.getElementById('main');
            main.innerHTML = '';

            filteredData.forEach(vehicle => {
                let card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <img src="${vehicle.image}" alt="${vehicle.regNo}">
                    <h3>${vehicle.regNo}</h3>
                    <p>Category: ${vehicle.category}</p>
                    <p>Driver: ${vehicle.driver}</p>
                    <p>Status: ${vehicle.availability}</p>
                    <button class="update">Update Driver</button>
                    <button class="toggle">Toggle Availability</button>
                    <button class="delete">Delete Vehicle</button>
                `;

                card.querySelector('.update').onclick = () => {
                    let newName = prompt('Enter new driver name:', vehicle.driver);
                    if (!newName || newName.trim() === '') {
                        alert('Driver name cannot be empty');
                        return;
                    }
                    vehicle.driver = newName.trim();
                    render();
                };

                card.querySelector('.toggle').onclick = () => {
                    vehicle.availability = vehicle.availability === 'Available' ? 'Unavailable' : 'Available';
                    render();
                };

                card.querySelector('.delete').onclick = () => {
                    if (confirm('Are you sure you want to delete this vehicle?')) {
                        data = data.filter(v => v !== vehicle);
                        render();
                    }
                };

                main.appendChild(card);
            });

            let catFilter = document.getElementById('catFilter');
            let availFilter = document.getElementById('availFilter');

            function applyFilters() {
                let catValue = catFilter.value;
                let availValue = availFilter.value;
                let filtered = data.filter(vehicle => {
                    let catMatch = catValue === 'ALL' || vehicle.category === catValue;
                    let availMatch = availValue === 'ALL' || vehicle.availability === availValue;
                    return catMatch && availMatch;
                });
                render(filtered);
            }

            if (catFilter && availFilter) {
                catFilter.onchange = applyFilters;
                availFilter.onchange = applyFilters;
            }

            document.getElementById('clearFilters').onclick = () => {
                if (catFilter) catFilter.value = 'ALL';
                if (availFilter) availFilter.value = 'ALL';
                render();
            };
        }

        // Initial render
        render();
    </script>
</body>
</html>